#!/bin/sh

external_input_present() {
	lsusb | grep -q 'Logitech, Inc. Cordless Mouse+Keyboard Receiver'
}

set_external() {
	gnome-set-altwin 0
	gnome-set-mouse-handedness left
}

set_laptop() {
	gnome-set-altwin 1
	gnome-set-mouse-handedness right
}

case "$1" in
	l*)							# l)aptop
		echo "$(basename "$0")" laptop
		set_laptop
		;;
	e*)							# e)xternal
		echo "$(basename "$0")" external
		set_external
		;;
	g*)							# g)uess
		if external_input_present; then
			echo "$(basename "$0")" guessed external
			set_external
		else
			echo "$(basename "$0")" guessed laptop
			set_laptop
		fi
		;;
	*) 
		echo "$0: unrecognized argument" 1>&2
		exit 1
		;;
esac

;$Id: perl-mode.el,v 1.3 2003/06/05 02:30:33 rkh Exp $
;;; perl mode
;===============================================================================
(autoload 'cperl-mode "cperl-mode" "alternate mode for editing Perl programs" t)

(setq										
 cperl-font-lock		t					; for some reason these must
 cperl-comment-column	44					; be set globally
 )

(defconst reece-cperl-style
  '( ("RPerl"
	 (cperl-indent-level               .  0)
	 (cperl-brace-offset               .  2)
	 (cperl-continued-statement-offset .  2)
	 (cperl-continued-brace-offset     . -2)
	 (cperl-label-offset               . -2)
	 (cperl-close-paren-offset		   . -1))))

(add-hook 'cperl-mode-hook 'Reece-perl-mode-setup)
(defun Reece-perl-mode-setup ()
  (local-set-key "\C-c\C-d"   'cperl-perldoc)
  (c-outline)
  (setq
   cperl-indent-level                0
;   cperl-brace-offset                2
;   cperl-continued-statement-offset  2
;   cperl-continued-brace-offset     -2
;   cperl-label-offset               -2
;   cperl-close-paren-offset			-1
;   cperl-indent-region-fix-constructs nil	; under penalty of death
   )
  (local-set-key "\C-c\C-d"   'perldb)
   (set-variable 'c-indent-level 0)			; required for c-outline
  (modify-syntax-entry ?§ "$")				; extra regexp quoting symbol
  (and (symbolp "cperl-style-alist")
	   (setq cperl-style-alist (append cperl-style-alist reece-cperl-style)))
  )

;; Use cperl-mode instead of the default perl-mode
(add-to-list 'auto-mode-alist '("\\.\\([pP][Llm]\\|al\\)\\'" . cperl-mode))
(add-to-list 'interpreter-mode-alist '("perl" . cperl-mode))
(add-to-list 'interpreter-mode-alist '("perl5" . cperl-mode))
(add-to-list 'interpreter-mode-alist '("miniperl" . cperl-mode))

;===============================================================================
